<header
  x-data="{ mobileMenuOpen: false, bannerShow: false, bannerDismissed: false }"
  x-init="setTimeout(() => bannerShow = true, 1300)"
  class="fixed top-0 left-0 right-0 z-50"
>
  {# ── Rootstock announcement bar — morpho blue / dart red, slides in after 1.3s ── #}
  {% if page.url != '/rootstock/' %}
  <div
    x-show="bannerShow && !bannerDismissed"
    x-cloak
    x-transition:enter="transition ease-out duration-500"
    x-transition:enter-start="-translate-y-full opacity-0"
    x-transition:enter-end="translate-y-0 opacity-100"
    x-transition:leave="transition ease-in duration-300"
    x-transition:leave-start="translate-y-0 opacity-100"
    x-transition:leave-end="-translate-y-full opacity-0"
    class="absolute top-0 left-0 right-0 z-[60] bg-gradient-to-r from-morpho-600 via-morpho-500 to-morpho-600 border-b border-cream-100/30 pointer-events-auto overflow-hidden"
  >
    <a href="{{ '/rootstock/' | url }}"
       class="flex items-center justify-center gap-2 py-[3px] hover:brightness-110 transition-all duration-200 px-8">
      <span class="text-dart-400">&#x2B22;</span>
      <img src="/assets/img/rootstock.svg" alt="Rootstock" class="h-[54px] inline-block opacity-90 -mb-8 self-start mt-[5px]" style="filter: brightness(0) invert(30%) sepia(80%) saturate(2000%) hue-rotate(350deg) brightness(95%) drop-shadow(0 0 1px #f5f0e6) drop-shadow(0 0 0.5px #f5f0e6)">
      <span class="text-cream-100 text-[11px] md:text-xs font-medium">— open-source architecture for LLM-driven engineering</span>
      <span class="text-cream-100/70 text-[11px] md:text-xs">View &rarr;</span>
    </a>
    <button
      @click.stop="bannerDismissed = true"
      class="absolute right-2 top-1/2 -translate-y-1/2 p-1 text-cream-100/60 hover:text-cream-100 transition-colors"
      aria-label="Dismiss banner"
    >
      <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path d="m18 6-12 12"/><path d="m6 6 12 12"/>
      </svg>
    </button>
  </div>
  {% endif %}

  <div class="pt-4 md:pt-6 px-4 md:px-6 pointer-events-none">
  <div class="max-w-6xl mx-auto">
    <div class="plate-wrap">
      <div class="plate chamfer-full md:chamfer-full-lg px-4 md:px-6 py-3 md:py-4 pointer-events-auto relative">
        <!-- Rivets — one on each side, vertically centered -->
        <div class="rivet absolute top-1/2 left-7 -translate-y-1/2 z-20"></div>
        <div class="rivet absolute top-1/2 right-7 -translate-y-1/2 z-20"></div>

        <!-- Desktop layout -->
        <div class="hidden md:flex items-center">
          <!-- Left nav — right-aligned so links sit near center -->
          <div class="flex-1 flex items-center justify-end gap-8 pr-8">
            <a href="{{ '/profile/' | url }}" class="font-display font-bold text-cream-200 hover:text-morpho-400 transition-all duration-200 md:text-lg hover:scale-[1.18] origin-center inline-block">Work</a>
            <a href="{{ '/about/' | url }}" class="font-display font-bold text-cream-200 hover:text-morpho-400 transition-all duration-200 md:text-lg hover:scale-[1.18] origin-center inline-block">About</a>
          </div>

          <!-- Center logo -->
          <a href="{{ '/' | url }}" class="flex-shrink-0 hover:scale-[1.18] transition-all duration-200 origin-center inline-block [&_img]:transition-all [&_img]:duration-200 [&_img]:hover:brightness-125 hover:[filter:drop-shadow(0_0_10px_#2A95C8)_drop-shadow(0_0_20px_#2A95C880)]">
            {% image "./src/static/corewood_symbol_transparent_ON-DARK.png", "Corewood", "56px", "h-14", "56", "eager" %}
          </a>

          <!-- Right nav + CTA — left-aligned so links sit near center, CTA aligns with chamfer -->
          <div class="flex-1 flex items-center justify-start gap-8 pl-8 pr-[40px]">
            <a href="{{ '/blog/' | url }}" class="font-display font-bold text-cream-200 hover:text-morpho-400 transition-all duration-200 md:text-lg hover:scale-[1.18] origin-center inline-block">Blog</a>
            <a href="{{ '/contact/' | url }}" class="font-display font-bold text-cream-200 hover:text-morpho-400 transition-all duration-200 md:text-lg hover:scale-[1.18] origin-center inline-block">Contact</a>
            <span class="flex-1"></span>
            <a href="{{ '/schedule-meeting/' | url }}" class="btn-primary text-xs px-4 py-2 flex-shrink-0">Schedule a Meeting</a>
          </div>
        </div>

        <!-- Mobile layout -->
        <div class="flex md:hidden items-center justify-center relative">
          <!-- Hamburger — positioned between logo and left edge -->
          <button
            @click="mobileMenuOpen = !mobileMenuOpen"
            class="absolute left-[25%] -translate-x-1/2 p-2 text-cream-200 hover:text-morpho-400 focus:outline-none"
            aria-label="Toggle menu"
          >
            <svg x-show="!mobileMenuOpen" class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <line x1="4" x2="20" y1="6" y2="6"/>
              <line x1="4" x2="20" y1="12" y2="12"/>
              <line x1="4" x2="20" y1="18" y2="18"/>
            </svg>
            <svg x-show="mobileMenuOpen" x-cloak class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path d="m18 6-12 12"/>
              <path d="m6 6 12 12"/>
            </svg>
          </button>

          <!-- Center logo -->
          <a href="{{ '/' | url }}">
            {% image "./src/static/corewood_symbol_transparent_ON-DARK.png", "Corewood", "40px", "h-10", "40", "eager" %}
          </a>

          <!-- Mobile CTA — between logo and right edge -->
          <a href="{{ '/schedule-meeting/' | url }}" class="absolute right-[25%] translate-x-1/2 btn-primary text-[10px] px-3 py-1.5">Book</a>
        </div>

      </div>
    </div>
  </div>

  <!-- Mobile menu -->
  <div
    x-show="mobileMenuOpen"
    x-cloak
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    class="md:hidden max-w-6xl mx-auto mt-4 pointer-events-auto"
  >
    <div class="plate-wrap">
      <div class="plate chamfer-full p-8">
        <nav class="flex flex-col items-center space-y-6">
          <a href="{{ '/profile/' | url }}" @click="mobileMenuOpen = false"
             class="text-xl text-cream-100 hover:text-morpho-400 transition-colors">Work</a>
          <a href="{{ '/about/' | url }}" @click="mobileMenuOpen = false"
             class="text-xl text-cream-100 hover:text-morpho-400 transition-colors">About</a>
          <a href="{{ '/blog/' | url }}" @click="mobileMenuOpen = false"
             class="text-xl text-cream-100 hover:text-morpho-400 transition-colors">Blog</a>
          <a href="{{ '/contact/' | url }}" @click="mobileMenuOpen = false"
             class="text-xl text-cream-100 hover:text-morpho-400 transition-colors">Contact</a>
          <a href="{{ '/schedule-meeting/' | url }}" @click="mobileMenuOpen = false"
             class="btn-primary text-center mt-2">Schedule a Meeting</a>
        </nav>
      </div>
    </div>
  </div>
</header>
