<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 680" fill="none">
  <defs>
    <filter id="glow">
      <feGaussianBlur stdDeviation="2.5" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <filter id="boxshadow" x="-4%" y="-4%" width="108%" height="116%">
      <feDropShadow dx="0" dy="3" stdDeviation="6" flood-color="#000" flood-opacity="0.35"/>
    </filter>
    <marker id="arrow" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M0,0 L10,3.5 L0,7z" fill="#2A95C8"/>
    </marker>
    <linearGradient id="morphoFade" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#2A95C8" stop-opacity="0.9"/>
      <stop offset="100%" stop-color="#2A95C8" stop-opacity="0.4"/>
    </linearGradient>
  </defs>

  <!-- ═══ STAGE 1: Researcher ═══ -->
  <g filter="url(#boxshadow)">
    <rect x="160" y="16" width="480" height="88" rx="10" fill="#0F3B24" stroke="#2A95C8" stroke-opacity="0.4" stroke-width="1.5"/>
    <!-- Flask icon -->
    <g transform="translate(188, 38)" fill="none" stroke="#2A95C8" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M6 2v8l-5 8a1 1 0 001 2h16a1 1 0 001-2l-5-8V2"/>
      <path d="M6 2h8" stroke-opacity="0.7"/>
      <circle cx="8" cy="16" r="1" fill="#2A95C8" stroke="none"/>
      <circle cx="12" cy="14" r="0.8" fill="#2A95C8" stroke="none"/>
    </g>
    <text x="220" y="46" font-family="system-ui, -apple-system, sans-serif" font-size="16" font-weight="700" fill="#F5F0E6">Researcher Creates Campaign</text>
    <text x="220" y="72" font-family="system-ui, -apple-system, sans-serif" font-size="12" fill="#A69E86">Schema definitions  &#xB7;  Quality bounds  &#xB7;  Data format  &#xB7;  Location  &#xB7;  Timeframe</text>
  </g>

  <!-- Arrow 1 -->
  <line x1="400" y1="104" x2="400" y2="142" stroke="#2A95C8" stroke-width="2" marker-end="url(#arrow)" filter="url(#glow)"/>

  <!-- ═══ STAGE 2: Rootstock Platform ═══ -->
  <g filter="url(#boxshadow)">
    <rect x="120" y="148" width="560" height="96" rx="10" fill="#0F3B24" stroke="#F5F0E6" stroke-opacity="0.12" stroke-width="1"/>
    <!-- Morpho accent bar at top -->
    <rect x="120" y="148" width="560" height="3" rx="1.5" fill="#2A95C8" opacity="0.7"/>
    <!-- Hexagon icon -->
    <g transform="translate(152, 172)">
      <polygon points="12,0 22,6 22,18 12,24 2,18 2,6" fill="#2A95C8" fill-opacity="0.2" stroke="#2A95C8" stroke-width="1.2"/>
      <text x="12" y="16" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="700" fill="#2A95C8">R</text>
    </g>
    <text x="186" y="184" font-family="system-ui, -apple-system, sans-serif" font-size="18" font-weight="700" fill="#F5F0E6">ROOTSTOCK</text>
    <text x="186" y="208" font-family="system-ui, -apple-system, sans-serif" font-size="12" fill="#A69E86">Publishes campaign  &#xB7;  Sends notifications  &#xB7;  Matches scientists by location &amp; equipment</text>
    <text x="186" y="228" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#2D7A4A">Campaign goes live &#x2192; automatic outreach to qualifying participants</text>
  </g>

  <!-- Branching arrows -->
  <path d="M300,244 L300,272 L240,292" stroke="#2A95C8" stroke-width="2" fill="none" marker-end="url(#arrow)" filter="url(#glow)"/>
  <path d="M500,244 L500,272 L560,292" stroke="#2A95C8" stroke-width="2" fill="none" marker-end="url(#arrow)" filter="url(#glow)"/>

  <!-- ═══ STAGE 3a: Citizen Scientists ═══ -->
  <g filter="url(#boxshadow)">
    <rect x="40" y="296" width="340" height="96" rx="10" fill="#0F3B24" stroke="#F5F0E6" stroke-opacity="0.12" stroke-width="1"/>
    <!-- Person icon -->
    <g transform="translate(68, 320)" fill="none" stroke="#4AADDA" stroke-width="1.5" stroke-linecap="round">
      <circle cx="10" cy="5" r="4"/>
      <path d="M1,20 C1,14 5,11 10,11 C15,11 19,14 19,20"/>
      <!-- Second person behind -->
      <circle cx="18" cy="5" r="3.5" stroke-opacity="0.4"/>
      <path d="M11,20 C11,15 14,12 18,12 C22,12 25,15 25,20" stroke-opacity="0.4"/>
    </g>
    <text x="110" y="326" font-family="system-ui, -apple-system, sans-serif" font-size="15" font-weight="700" fill="#F5F0E6">Citizen Scientists</text>
    <text x="110" y="348" font-family="system-ui, -apple-system, sans-serif" font-size="12" fill="#A69E86">Discover relevant campaigns</text>
    <text x="110" y="366" font-family="system-ui, -apple-system, sans-serif" font-size="12" fill="#A69E86">Enroll devices  &#xB7;  Contribute readings</text>
    <!-- Bell notification icon -->
    <g transform="translate(330, 308)" fill="none" stroke="#E85A48" stroke-width="1.3" stroke-linecap="round">
      <path d="M7,2 C7,1 8,0 9,0 C10,0 11,1 11,2 C11,2 14,5 14,9 L4,9 C4,5 7,2 7,2z"/>
      <path d="M7,9 v1 a2,2 0 004,0 v-1"/>
      <circle cx="14" cy="2" r="2.5" fill="#E85A48" stroke="none" opacity="0.9"/>
    </g>
  </g>

  <!-- ═══ STAGE 3b: IoT Devices ═══ -->
  <g filter="url(#boxshadow)">
    <rect x="420" y="296" width="340" height="96" rx="10" fill="#0F3B24" stroke="#F5F0E6" stroke-opacity="0.12" stroke-width="1"/>
    <!-- Device icons -->
    <g transform="translate(448, 316)" fill="none" stroke="#4AADDA" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round">
      <!-- Phone -->
      <rect x="0" y="0" width="12" height="20" rx="2"/>
      <line x1="4" y1="17" x2="8" y2="17"/>
      <!-- Thermometer/sensor -->
      <g transform="translate(20, 0)">
        <rect x="2" y="0" width="6" height="14" rx="3"/>
        <circle cx="5" cy="16" r="4"/>
        <line x1="5" y1="4" x2="5" y2="13"/>
      </g>
      <!-- Signal waves -->
      <g transform="translate(36, 4)" stroke-opacity="0.5">
        <path d="M0,8 Q4,4 8,8" fill="none"/>
        <path d="M-2,12 Q4,4 10,12" fill="none"/>
      </g>
    </g>
    <text x="500" y="326" font-family="system-ui, -apple-system, sans-serif" font-size="15" font-weight="700" fill="#F5F0E6">IoT Devices</text>
    <text x="500" y="348" font-family="system-ui, -apple-system, sans-serif" font-size="12" fill="#A69E86">Weather stations  &#xB7;  Air quality monitors</text>
    <text x="500" y="366" font-family="system-ui, -apple-system, sans-serif" font-size="12" fill="#A69E86">Water sensors  &#xB7;  Soil probes  &#xB7;  GPS devices</text>
    <text x="500" y="382" font-family="system-ui, -apple-system, sans-serif" font-size="11" fill="#C4B899" font-style="italic">Auto-submit after enrollment</text>
  </g>

  <!-- Converging arrows -->
  <path d="M240,392 L240,420 L300,440" stroke="#2A95C8" stroke-width="2" fill="none" marker-end="url(#arrow)" filter="url(#glow)"/>
  <path d="M560,392 L560,420 L500,440" stroke="#2A95C8" stroke-width="2" fill="none" marker-end="url(#arrow)" filter="url(#glow)"/>

  <!-- ═══ STAGE 4: Validation Pipeline ═══ -->
  <g filter="url(#boxshadow)">
    <rect x="120" y="444" width="560" height="100" rx="10" fill="#0F3B24" stroke="#2D7A4A" stroke-opacity="0.5" stroke-width="1.5"/>
    <!-- Shield icon -->
    <g transform="translate(148, 466)" fill="none" stroke="#2D7A4A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M10,1 L18,5 L18,12 C18,17 10,21 10,21 C10,21 2,17 2,12 L2,5z"/>
      <path d="M6,11 L9,14 L14,8" stroke-width="2"/>
    </g>
    <text x="180" y="480" font-family="system-ui, -apple-system, sans-serif" font-size="16" font-weight="700" fill="#F5F0E6">Automated Validation</text>
    <!-- Check items row -->
    <g transform="translate(180, 494)">
      <text font-family="system-ui, -apple-system, sans-serif" font-size="12" fill="#2D7A4A">
        <tspan>&#x2713; Schema</tspan>
      </text>
      <text x="80" font-family="system-ui, -apple-system, sans-serif" font-size="12" fill="#2D7A4A">
        <tspan>&#x2713; Range</tspan>
      </text>
      <text x="150" font-family="system-ui, -apple-system, sans-serif" font-size="12" fill="#2D7A4A">
        <tspan>&#x2713; Rate</tspan>
      </text>
      <text x="210" font-family="system-ui, -apple-system, sans-serif" font-size="12" fill="#2D7A4A">
        <tspan>&#x2713; Geolocation</tspan>
      </text>
      <text x="310" font-family="system-ui, -apple-system, sans-serif" font-size="12" fill="#2D7A4A">
        <tspan>&#x2713; Anomaly Detection</tspan>
      </text>
    </g>
    <text x="180" y="526" font-family="system-ui, -apple-system, sans-serif" font-size="12" fill="#C4B899" font-style="italic">Researcher-defined thresholds &#x2014; validation happens before ingestion, not after</text>
  </g>

  <!-- Arrow 4 -->
  <line x1="400" y1="544" x2="400" y2="578" stroke="#2A95C8" stroke-width="2" marker-end="url(#arrow)" filter="url(#glow)"/>

  <!-- ═══ STAGE 5: Clean Data Output ═══ -->
  <g filter="url(#boxshadow)">
    <rect x="160" y="584" width="480" height="80" rx="10" fill="#0F3B24" stroke="#2D7A4A" stroke-opacity="0.3" stroke-width="1"/>
    <!-- Morpho accent bar at bottom -->
    <rect x="160" y="661" width="480" height="3" rx="1.5" fill="#2D7A4A" opacity="0.5"/>
    <!-- Database icon -->
    <g transform="translate(188, 604)" fill="none" stroke="#2D7A4A" stroke-width="1.5">
      <ellipse cx="10" cy="3" rx="10" ry="3"/>
      <path d="M0,3 v14 C0,19.5 20,19.5 20,17 V3"/>
      <path d="M0,10 C0,12.5 20,12.5 20,10" stroke-opacity="0.4"/>
    </g>
    <text x="220" y="618" font-family="system-ui, -apple-system, sans-serif" font-size="16" font-weight="700" fill="#F5F0E6">Research-Ready Data</text>
    <text x="220" y="642" font-family="system-ui, -apple-system, sans-serif" font-size="12" fill="#A69E86">Full provenance  &#xB7;  FAIR-compliant  &#xB7;  Zero data cleanup  &#xB7;  Reduced management costs</text>
  </g>
</svg>
